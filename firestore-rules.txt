# üîí Regras de Seguran√ßa do Firestore - Pesquisou

# Copie estas regras e cole no Firebase Console > Firestore > Rules

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Usu√°rios: usu√°rios podem ler/escrever apenas seus pr√≥prios dados
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // √Åreas: usu√°rios podem ler/escrever apenas suas pr√≥prias √°reas
    match /areas/{areaId} {
      allow read, write: if request.auth != null && request.auth.uid == resource.data.userId;
      allow create: if request.auth != null && request.auth.uid == request.resource.data.userId;
    }
    
    // Feedbacks: qualquer pessoa pode escrever, usu√°rios podem ler feedbacks de suas √°reas
    match /feedbacks/{feedbackId} {
      allow write: if true;
      allow read: if request.auth != null && 
        exists(/databases/$(database)/documents/areas/$(resource.data.areaId)) &&
        get(/databases/$(database)/documents/areas/$(resource.data.areaId)).data.userId == request.auth.uid;
    }
  }
}

# üìã Como aplicar:
# 1. Acesse https://console.firebase.google.com/
# 2. Selecione seu projeto "pesquisou-ee03b"
# 3. V√° em "Firestore Database" no menu lateral
# 4. Clique na aba "Regras"
# 5. Substitua todo o conte√∫do pelas regras acima
# 6. Clique em "Publicar"
# 7. Aguarde alguns segundos para as regras serem aplicadas

# ‚úÖ Estas regras resolvem:
# - Erro "Missing or insufficient permissions"
# - Permiss√£o para criar usu√°rios
# - Permiss√£o para criar √°reas
# - Permiss√£o para enviar feedbacks
# - Seguran√ßa para ler apenas dados pr√≥prios 